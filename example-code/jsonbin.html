
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Running JavaScript Code</title>
</head>
<body>
    <my-custom-element></my-custom-element>
  <script>
        const apiKey = '$2b$10$GGfsZM15tEQgUK52JoMMKe15rAKy6GkO5eG5Hzu.3NNpPug61iS4K'; // Replace with your JSONBin secret key
        //const binId = 'your_bin_id'; // Replace with the ID of your JSONBin bin
        const url = 'https://api.jsonbin.io/v3/b/64c9e29ab89b1e2299c9cecc';

        fetch(url, {
        headers: {
            'X-Access-Key': apiKey,
            'Content-Type':'application/json',
        }
        })
        .then(response => {
            return response.json();
        })
        .then(data => {
            console.log('Data from JSONBin:', data.record);
            class MyCustomElement extends HTMLElement {
            constructor() {
            super();

            // Attach the Shadow DOM to the custom element
            const shadowRoot = this.attachShadow({ mode: 'open' });

            // Retrieve the courses data from local storage
            //const storedJsonString = data.record.courseList;
            const storedCollegeCourses = data.record.courseList;
            console.log(storedCollegeCourses[0].courseName)
            // Create the root list for the custom element
            const rootList = document.createElement('ul');

            // Add the styles for the custom element
            const style = document.createElement('style');
            style.textContent = `
                /* Define styles for your custom element */
                :host {
                display: block;
                border: 1px solid black;
                padding: 10px;
                background-color: lightgray;
                }
            `;

            // Create and append the course list items to the root ul
            if (storedCollegeCourses) {
                storedCollegeCourses.forEach(course => {
                const listItem = document.createElement('li');
                listItem.textContent = `${course.courseId}: ${course.courseName}`;

                rootList.appendChild(listItem);
                });
            }
            // Append the elements to the Shadow DOM
            shadowRoot.appendChild(style);
            shadowRoot.appendChild(rootList);
            }
        }

        // Register the custom element with the browser
        customElements.define('my-custom-element', MyCustomElement);
        })
        .catch(error => {
            console.error('Error reading data:', error);
        });
    
  </script>
</body>
</html>

